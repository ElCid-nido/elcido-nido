:root{
  --primary:#0B5FFF; --primary-600:#0a4ddb;
  --bg:#ffffff; --panel:#ffffff; --bubble:#f6f8ff; --text:#0b1220; --muted:#6b7280;
  --shadow:0 8px 24px rgba(15,23,42,.08);
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220; --panel:#0f172a; --bubble:#172036; --text:#e5e7eb; --muted:#94a3b8;
    --shadow:0 10px 30px rgba(0,0,0,.35);
  }
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font:14px/1.35 system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}

.header{
  position:sticky; top:0; z-index:2; padding:12px; border:0;
  background:linear-gradient(135deg, var(--primary), #5ba8ff);
  color:#fff; box-shadow:var(--shadow);
}
.brand{display:flex;align-items:center;gap:10px}
.logo-img{height:32px;width:auto;border-radius:8px;background:#fff;padding:4px}
.title{font-weight:800;letter-spacing:.2px}
.subtitle{font-size:12px;opacity:.9}

.quick{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}
.quick button{
  border:0; background:rgba(255,255,255,.15); color:#fff; backdrop-filter:blur(6px);
  border-radius:999px; padding:7px 12px; cursor:pointer; transition:transform .08s ease;
}
.quick button:active{transform:scale(.98)}

#chat{padding:14px; display:flex; flex-direction:column; gap:10px; min-height:260px; max-height:52vh; overflow:auto}

.msg{display:flex;gap:8px;align-items:flex-end; animation:pop .18s ease-out}
.msg .avatar {
  width:28px;
  height:28px;
  border-radius:50%;
  display:grid;
  place-items:center;
  background:var(--bubble);
  color:var(--primary);
  flex:0 0 28px;
  box-shadow:var(--shadow);
  overflow:hidden; /* aggiungi questa riga */
}
.msg .bubble{
  background:var(--bubble); padding:10px 12px; border-radius:14px; max-width:82%;
  position:relative; box-shadow:var(--shadow);
}
.msg .bubble::after{ /* tail */
  content:""; position:absolute; bottom:-2px; left:10px; width:10px; height:10px;
  background:var(--bubble); transform:rotate(45deg);
  box-shadow:2px 2px 6px rgba(15,23,42,.08);
}
.msg.user{justify-content:flex-end}
.msg.user .avatar{order:2;background:var(--primary);color:#fff}
.msg.user .bubble{background:#e8f0ff}
.msg.user .bubble::after{left:auto; right:10px; background:#e8f0ff}

#inputForm{display:flex;gap:8px;padding:12px;border-top:1px solid rgba(148,163,184,.18);background:var(--panel)}
#inputForm input[type=text]{
  flex:1; border:1px solid rgba(148,163,184,.35); border-radius:12px; padding:12px 12px;
  background:transparent; color:var(--text);
}
.send{
  background:#fff; color:var(--primary); border:1px solid rgba(148,163,184,.35);
  border-radius:12px; padding:0 14px; cursor:pointer; font-weight:700;
}
.honeypot{display:none!important}

.handoff{padding:12px 12px 16px; border-top:1px solid rgba(148,163,184,.18); background:var(--panel)}
.handoff h2{font-size:14px;margin:8px 0 10px}
#leadForm{display:grid;gap:8px}
#leadForm input, #leadForm textarea{
  border:1px solid rgba(148,163,184,.35); border-radius:12px; padding:10px; background:transparent; color:var(--text);
}
#leadForm button{
  background:var(--primary); border:0; color:#fff; border-radius:12px; padding:10px; cursor:pointer;
  box-shadow:var(--shadow);
}

.consent,.hint{font-size:12px;color:var(--muted)}

.action-row{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap}
.action{
  font-size:12px;border:1px solid rgba(148,163,184,.35);border-radius:999px;background:#fff;padding:5px 9px;cursor:pointer;
}

.typing{display:flex;align-items:center;gap:8px;color:var(--muted);padding:0 14px 10px}
.typing.hidden{display:none}
.dot{width:6px;height:6px;border-radius:50%;background:var(--muted);opacity:.5;animation:blink 1s infinite}
.dot:nth-child(2){animation-delay:.2s}.dot:nth-child(3){animation-delay:.4s}

@keyframes blink{0%,60%,100%{opacity:.2}30%{opacity:1}}
@keyframes pop{from{transform:translateY(4px);opacity:0}to{transform:none;opacity:1}}
